function filterCommunities(communities, userId) {
  return {
    todas: communities,
    admin: communities.filter(c => c.admin_id === userId),
    coordinador: communities.filter(c => c.coordinators?.includes(userId)),
    miembros: communities.filter(
      c =>
        c.members?.includes(userId) &&
        c.admin_id !== userId &&
        !(c.coordinators?.includes(userId))
    ),
    solicitudes: communities.filter(c => c.pending?.includes(userId)),
  };
}